import{s as ie,o as ce,f as $,a as L,l as P,g as b,h as D,c as x,m as V,d as p,j as y,i as j,K as i,L as Z,p as q,u as fe,e as ee,I as oe,n as ue}from"../chunks/scheduler.7a274a43.js";import{S as de,i as he,b as Q,d as W,m as X,a as B,t as F,e as Y,g as re,c as ne}from"../chunks/index.28409b7f.js";import{e as te,u as _e,U as me,o as pe}from"../chunks/UIcon.494f8e38.js";import{C as ve}from"../chunks/Card.1474eb47.js";import{S as ge}from"../chunks/SearchPage.15e9f503.js";function se(u,e,s){const t=u.slice();return t[8]=e[s],t[10]=s,t}function $e(u){let e,s,t=[],l=new Map,n,c,o=te(u[0]);const f=a=>a[8].id;for(let a=0;a<o.length;a+=1){let r=se(u,o,a),h=f(r);l.set(h,t[a]=ae(h,r))}return{c(){e=$("div"),s=L();for(let a=0;a<t.length;a+=1)t[a].c();n=ee(),this.h()},l(a){e=b(a,"DIV",{class:!0}),D(e).forEach(p),s=x(a);for(let r=0;r<t.length;r+=1)t[r].l(a);n=ee(),this.h()},h(){y(e,"class","w-[0.5px] hidden lg:flex top-0 bottom-0 py-50px bg-[var(--border)] absolute rounded")},m(a,r){j(a,e,r),j(a,s,r);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(a,r);j(a,n,r),c=!0},p(a,r){r&1&&(o=te(a[0]),re(),t=_e(t,r,f,1,a,o,l,n.parentNode,pe,ae,n,se),ne())},i(a){if(!c){for(let r=0;r<o.length;r+=1)B(t[r]);c=!0}},o(a){for(let r=0;r<t.length;r+=1)F(t[r]);c=!1},d(a){a&&(p(e),p(s),p(n));for(let r=0;r<t.length;r+=1)t[r].d(a)}}}function be(u){let e,s,t,l,n="Could not find any commits...",c;return s=new me({props:{icon:"i-carbon-development",classes:"text-3.5em"}}),{c(){e=$("div"),Q(s.$$.fragment),t=L(),l=$("p"),l.textContent=n,this.h()},l(o){e=b(o,"DIV",{class:!0});var f=D(e);W(s.$$.fragment,f),t=x(f),l=b(f,"P",{class:!0,["data-svelte-h"]:!0}),oe(l)!=="svelte-tdhd7d"&&(l.textContent=n),f.forEach(p),this.h()},h(){y(l,"class","font-300"),y(e,"class","p-5 col-center gap-3 m-y-auto text-[var(--accent-text)] flex-1")},m(o,f){j(o,e,f),X(s,e,null),i(e,t),i(e,l),c=!0},p:ue,i(o){c||(B(s.$$.fragment,o),c=!0)},o(o){F(s.$$.fragment,o),c=!1},d(o){o&&p(e),Y(s)}}}function le(u){let e,s="This commit has been revoked";return{c(){e=$("div"),e.textContent=s,this.h()},l(t){e=b(t,"DIV",{class:!0,["data-svelte-h"]:!0}),oe(e)!=="svelte-hqhb0j"&&(e.textContent=s),this.h()},h(){y(e,"class","text-red-500")},m(t,l){j(t,e,l)},d(t){t&&p(e)}}}function ke(u){let e,s,t,l=u[8].repo+"",n,c,o,f,a=u[8].sha+"",r,h,_,k,S=u[8].authorName+"",E,H,T,N,A=new Date(u[8].date).toLocaleString()+"",M,U,w,R,d=u[8].message+"",v,I,g=u[8].revoked&&le();return{c(){e=$("div"),s=$("div"),t=P("Repo: "),n=P(l),c=L(),o=$("div"),f=P("Commit SHA: "),r=P(a),h=L(),_=$("div"),k=P("Author: "),E=P(S),H=L(),T=$("div"),N=P("Date: "),M=P(A),U=L(),w=$("div"),R=P("Message: "),v=P(d),I=L(),g&&g.c(),this.h()},l(C){e=b(C,"DIV",{class:!0});var m=D(e);s=b(m,"DIV",{class:!0});var O=D(s);t=V(O,"Repo: "),n=V(O,l),O.forEach(p),c=x(m),o=b(m,"DIV",{});var K=D(o);f=V(K,"Commit SHA: "),r=V(K,a),K.forEach(p),h=x(m),_=b(m,"DIV",{});var z=D(_);k=V(z,"Author: "),E=V(z,S),z.forEach(p),H=x(m),T=b(m,"DIV",{});var G=D(T);N=V(G,"Date: "),M=V(G,A),G.forEach(p),U=x(m),w=b(m,"DIV",{class:!0});var J=D(w);R=V(J,"Message: "),v=V(J,d),J.forEach(p),I=x(m),g&&g.l(m),m.forEach(p),this.h()},h(){y(s,"class","text-[1.3em]"),y(w,"class","text-[var(--accent-text)] text-[0.9em] font-200 mb-2"),y(e,"class","flex-1 col gap-2 items-stretch")},m(C,m){j(C,e,m),i(e,s),i(s,t),i(s,n),i(e,c),i(e,o),i(o,f),i(o,r),i(e,h),i(e,_),i(_,k),i(_,E),i(e,H),i(e,T),i(T,N),i(T,M),i(e,U),i(e,w),i(w,R),i(w,v),i(e,I),g&&g.m(e,null)},p(C,m){m&1&&l!==(l=C[8].repo+"")&&q(n,l),m&1&&a!==(a=C[8].sha+"")&&q(r,a),m&1&&S!==(S=C[8].authorName+"")&&q(E,S),m&1&&A!==(A=new Date(C[8].date).toLocaleString()+"")&&q(M,A),m&1&&d!==(d=C[8].message+"")&&q(v,d),C[8].revoked?g||(g=le(),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(C){C&&p(e),g&&g.d()}}}function ae(u,e){let s,t,l,n,c;return l=new ve({props:{$$slots:{default:[ke]},$$scope:{ctx:e}}}),{key:u,first:null,c(){s=$("div"),t=$("div"),Q(l.$$.fragment),n=L(),this.h()},l(o){s=b(o,"DIV",{class:!0});var f=D(s);t=b(f,"DIV",{class:!0});var a=D(t);W(l.$$.fragment,a),a.forEach(p),n=x(f),f.forEach(p),this.h()},h(){y(t,"class","col flex-1 items-stretch"),y(s,"class","relative items-center w-full my-[10px]"),this.first=s},m(o,f){j(o,s,f),i(s,t),X(l,t,null),i(s,n),c=!0},p(o,f){e=o;const a={};f&2049&&(a.$$scope={dirty:f,ctx:e}),l.$set(a)},i(o){c||(B(l.$$.fragment,o),c=!0)},o(o){F(l.$$.fragment,o),c=!1},d(o){o&&p(s),Y(l)}}}function we(u){let e,s,t,l,n,c,o,f,a,r,h,_=u[1]+1+"",k,S,E,H,T,N,A,M;const U=[be,$e],w=[];function R(d,v){return d[0].length===0?0:1}return s=R(u),t=w[s]=U[s](u),{c(){e=$("div"),t.c(),l=L(),n=$("div"),c=$("button"),o=P("Previous"),a=L(),r=$("span"),h=P("Page "),k=P(_),S=L(),E=$("button"),H=P("Next"),this.h()},l(d){e=b(d,"DIV",{class:!0});var v=D(e);t.l(v),l=x(v),n=b(v,"DIV",{class:!0});var I=D(n);c=b(I,"BUTTON",{class:!0});var g=D(c);o=V(g,"Previous"),g.forEach(p),a=x(I),r=b(I,"SPAN",{});var C=D(r);h=V(C,"Page "),k=V(C,_),C.forEach(p),S=x(I),E=b(I,"BUTTON",{class:!0});var m=D(E);H=V(m,"Next"),m.forEach(p),I.forEach(p),v.forEach(p),this.h()},h(){c.disabled=f=u[1]===0,y(c,"class","svelte-11klelf"),E.disabled=T=u[1]===u[2]-1,y(E,"class","svelte-11klelf"),y(n,"class","pagination-controls svelte-11klelf"),y(e,"class","col items-center relative mt-10 flex-1")},m(d,v){j(d,e,v),w[s].m(e,null),i(e,l),i(e,n),i(n,c),i(c,o),i(n,a),i(n,r),i(r,h),i(r,k),i(n,S),i(n,E),i(E,H),N=!0,A||(M=[Z(c,"click",u[5]),Z(E,"click",u[6])],A=!0)},p(d,v){let I=s;s=R(d),s===I?w[s].p(d,v):(re(),F(w[I],1,1,()=>{w[I]=null}),ne(),t=w[s],t?t.p(d,v):(t=w[s]=U[s](d),t.c()),B(t,1),t.m(e,l)),(!N||v&2&&f!==(f=d[1]===0))&&(c.disabled=f),(!N||v&2)&&_!==(_=d[1]+1+"")&&q(k,_),(!N||v&6&&T!==(T=d[1]===d[2]-1))&&(E.disabled=T)},i(d){N||(B(t),N=!0)},o(d){F(t),N=!1},d(d){d&&p(e),w[s].d(),A=!1,fe(M)}}}function Ce(u){let e,s;return e=new ge({props:{title:"Commits",search:De,$$slots:{default:[we]},$$scope:{ctx:u}}}),e.$on("search",u[3]),{c(){Q(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){X(e,t,l),s=!0},p(t,[l]){const n={};l&2055&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){Y(e,t)}}}let De="";function Ee(u,e,s){let t=[],l=0,n=0;async function c(h=0){try{const _=await fetch(`https://portfoliocommits.onrender.com/api/v1/commits/get/all?page=${h}&sorted=true`);if(!_.ok)throw new Error(`HTTP error! Status: ${_.status}`);const k=await _.json();console.log("Fetched data:",k),s(0,t=k);const S=await fetch("https://portfoliocommits.onrender.com/api/v1/commits/get/pages");if(!S.ok)throw new Error(`HTTP error! Status: ${S.status}`);s(2,n=await S.json())}catch(_){console.error("Failed to fetch commits:",_)}}const o=h=>{const _=h.detail.search.toLowerCase();s(0,t=t.filter(k=>k.repo.toLowerCase().includes(_)||k.sha.toLowerCase().includes(_)||k.authorName.toLowerCase().includes(_)||k.message.toLowerCase().includes(_)))},f=h=>{h>=0&&h<=n&&(s(1,l=h),c(l))};return ce(()=>{c(l)}),[t,l,n,o,f,()=>f(l-1),()=>f(l+1)]}class Te extends de{constructor(e){super(),he(this,e,Ee,Ce,ie,{})}}export{Te as component};
