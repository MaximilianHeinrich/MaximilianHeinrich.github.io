import{s as ie,o as ce,f as $,a as L,l as P,g as b,h as D,c as x,m as V,d as v,j as y,i as j,K as i,L as Z,p as q,u as ue,e as ee,I as oe,n as fe}from"../chunks/scheduler.7a274a43.js";import{S as de,i as he,b as Q,d as W,m as X,a as B,t as F,e as Y,g as re,c as ne}from"../chunks/index.28409b7f.js";import{e as te,u as _e,U as me,o as ve}from"../chunks/UIcon.494f8e38.js";import{C as pe}from"../chunks/Card.1474eb47.js";import{S as ge}from"../chunks/SearchPage.dc5f2565.js";function le(f,e,l){const t=f.slice();return t[8]=e[l],t[10]=l,t}function $e(f){let e,l,t=[],s=new Map,n,c,o=te(f[0]);const u=a=>a[8].id;for(let a=0;a<o.length;a+=1){let r=le(f,o,a),h=u(r);s.set(h,t[a]=ae(h,r))}return{c(){e=$("div"),l=L();for(let a=0;a<t.length;a+=1)t[a].c();n=ee(),this.h()},l(a){e=b(a,"DIV",{class:!0}),D(e).forEach(v),l=x(a);for(let r=0;r<t.length;r+=1)t[r].l(a);n=ee(),this.h()},h(){y(e,"class","w-[0.5px] hidden lg:flex top-0 bottom-0 py-50px bg-[var(--border)] absolute rounded")},m(a,r){j(a,e,r),j(a,l,r);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(a,r);j(a,n,r),c=!0},p(a,r){r&1&&(o=te(a[0]),re(),t=_e(t,r,u,1,a,o,s,n.parentNode,ve,ae,n,le),ne())},i(a){if(!c){for(let r=0;r<o.length;r+=1)B(t[r]);c=!0}},o(a){for(let r=0;r<t.length;r+=1)F(t[r]);c=!1},d(a){a&&(v(e),v(l),v(n));for(let r=0;r<t.length;r+=1)t[r].d(a)}}}function be(f){let e,l,t,s,n="Could not find any commits...",c;return l=new me({props:{icon:"i-carbon-development",classes:"text-3.5em"}}),{c(){e=$("div"),Q(l.$$.fragment),t=L(),s=$("p"),s.textContent=n,this.h()},l(o){e=b(o,"DIV",{class:!0});var u=D(e);W(l.$$.fragment,u),t=x(u),s=b(u,"P",{class:!0,["data-svelte-h"]:!0}),oe(s)!=="svelte-tdhd7d"&&(s.textContent=n),u.forEach(v),this.h()},h(){y(s,"class","font-300"),y(e,"class","p-5 col-center gap-3 m-y-auto text-[var(--accent-text)] flex-1")},m(o,u){j(o,e,u),X(l,e,null),i(e,t),i(e,s),c=!0},p:fe,i(o){c||(B(l.$$.fragment,o),c=!0)},o(o){F(l.$$.fragment,o),c=!1},d(o){o&&v(e),Y(l)}}}function se(f){let e,l="This commit has been revoked";return{c(){e=$("div"),e.textContent=l,this.h()},l(t){e=b(t,"DIV",{class:!0,["data-svelte-h"]:!0}),oe(e)!=="svelte-hqhb0j"&&(e.textContent=l),this.h()},h(){y(e,"class","text-red-500")},m(t,s){j(t,e,s)},d(t){t&&v(e)}}}function ke(f){let e,l,t,s=f[8].repo+"",n,c,o,u,a=f[8].sha+"",r,h,_,k,S=f[8].authorName+"",E,H,T,N,A=new Date(f[8].date).toLocaleString()+"",M,U,w,R,d=f[8].message+"",p,I,g=f[8].revoked&&se();return{c(){e=$("div"),l=$("div"),t=P("Repo: "),n=P(s),c=L(),o=$("div"),u=P("Commit SHA: "),r=P(a),h=L(),_=$("div"),k=P("Author: "),E=P(S),H=L(),T=$("div"),N=P("Date: "),M=P(A),U=L(),w=$("div"),R=P("Message: "),p=P(d),I=L(),g&&g.c(),this.h()},l(C){e=b(C,"DIV",{class:!0});var m=D(e);l=b(m,"DIV",{class:!0});var O=D(l);t=V(O,"Repo: "),n=V(O,s),O.forEach(v),c=x(m),o=b(m,"DIV",{});var K=D(o);u=V(K,"Commit SHA: "),r=V(K,a),K.forEach(v),h=x(m),_=b(m,"DIV",{});var z=D(_);k=V(z,"Author: "),E=V(z,S),z.forEach(v),H=x(m),T=b(m,"DIV",{});var G=D(T);N=V(G,"Date: "),M=V(G,A),G.forEach(v),U=x(m),w=b(m,"DIV",{class:!0});var J=D(w);R=V(J,"Message: "),p=V(J,d),J.forEach(v),I=x(m),g&&g.l(m),m.forEach(v),this.h()},h(){y(l,"class","text-[1.3em]"),y(w,"class","text-[var(--accent-text)] text-[0.9em] font-200 mb-2"),y(e,"class","flex-1 col gap-2 items-stretch")},m(C,m){j(C,e,m),i(e,l),i(l,t),i(l,n),i(e,c),i(e,o),i(o,u),i(o,r),i(e,h),i(e,_),i(_,k),i(_,E),i(e,H),i(e,T),i(T,N),i(T,M),i(e,U),i(e,w),i(w,R),i(w,p),i(e,I),g&&g.m(e,null)},p(C,m){m&1&&s!==(s=C[8].repo+"")&&q(n,s),m&1&&a!==(a=C[8].sha+"")&&q(r,a),m&1&&S!==(S=C[8].authorName+"")&&q(E,S),m&1&&A!==(A=new Date(C[8].date).toLocaleString()+"")&&q(M,A),m&1&&d!==(d=C[8].message+"")&&q(p,d),C[8].revoked?g||(g=se(),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(C){C&&v(e),g&&g.d()}}}function ae(f,e){let l,t,s,n,c;return s=new pe({props:{$$slots:{default:[ke]},$$scope:{ctx:e}}}),{key:f,first:null,c(){l=$("div"),t=$("div"),Q(s.$$.fragment),n=L(),this.h()},l(o){l=b(o,"DIV",{class:!0});var u=D(l);t=b(u,"DIV",{class:!0});var a=D(t);W(s.$$.fragment,a),a.forEach(v),n=x(u),u.forEach(v),this.h()},h(){y(t,"class","col flex-1 items-stretch"),y(l,"class","relative items-center w-full my-[10px]"),this.first=l},m(o,u){j(o,l,u),i(l,t),X(s,t,null),i(l,n),c=!0},p(o,u){e=o;const a={};u&2049&&(a.$$scope={dirty:u,ctx:e}),s.$set(a)},i(o){c||(B(s.$$.fragment,o),c=!0)},o(o){F(s.$$.fragment,o),c=!1},d(o){o&&v(l),Y(s)}}}function we(f){let e,l,t,s,n,c,o,u,a,r,h,_=f[1]+1+"",k,S,E,H,T,N,A,M;const U=[be,$e],w=[];function R(d,p){return d[0].length===0?0:1}return l=R(f),t=w[l]=U[l](f),{c(){e=$("div"),t.c(),s=L(),n=$("div"),c=$("button"),o=P("Previous"),a=L(),r=$("span"),h=P("Page "),k=P(_),S=L(),E=$("button"),H=P("Next"),this.h()},l(d){e=b(d,"DIV",{class:!0});var p=D(e);t.l(p),s=x(p),n=b(p,"DIV",{class:!0});var I=D(n);c=b(I,"BUTTON",{class:!0});var g=D(c);o=V(g,"Previous"),g.forEach(v),a=x(I),r=b(I,"SPAN",{});var C=D(r);h=V(C,"Page "),k=V(C,_),C.forEach(v),S=x(I),E=b(I,"BUTTON",{class:!0});var m=D(E);H=V(m,"Next"),m.forEach(v),I.forEach(v),p.forEach(v),this.h()},h(){c.disabled=u=f[1]===0,y(c,"class","svelte-11klelf"),E.disabled=T=f[1]===f[2]-1,y(E,"class","svelte-11klelf"),y(n,"class","pagination-controls svelte-11klelf"),y(e,"class","col items-center relative mt-10 flex-1")},m(d,p){j(d,e,p),w[l].m(e,null),i(e,s),i(e,n),i(n,c),i(c,o),i(n,a),i(n,r),i(r,h),i(r,k),i(n,S),i(n,E),i(E,H),N=!0,A||(M=[Z(c,"click",f[5]),Z(E,"click",f[6])],A=!0)},p(d,p){let I=l;l=R(d),l===I?w[l].p(d,p):(re(),F(w[I],1,1,()=>{w[I]=null}),ne(),t=w[l],t?t.p(d,p):(t=w[l]=U[l](d),t.c()),B(t,1),t.m(e,s)),(!N||p&2&&u!==(u=d[1]===0))&&(c.disabled=u),(!N||p&2)&&_!==(_=d[1]+1+"")&&q(k,_),(!N||p&6&&T!==(T=d[1]===d[2]-1))&&(E.disabled=T)},i(d){N||(B(t),N=!0)},o(d){F(t),N=!1},d(d){d&&v(e),w[l].d(),A=!1,ue(M)}}}function Ce(f){let e,l;return e=new ge({props:{title:"Commits",search:De,$$slots:{default:[we]},$$scope:{ctx:f}}}),e.$on("search",f[3]),{c(){Q(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){X(e,t,s),l=!0},p(t,[s]){const n={};s&2055&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}let De="";function Ee(f,e,l){let t=[],s=0,n=0;async function c(h=0){try{const _=await fetch(`http://localhost:1337/api/v1/commits/get/all?page=${h}&sorted=true`);if(!_.ok)throw new Error(`HTTP error! Status: ${_.status}`);const k=await _.json();console.log("Fetched data:",k),l(0,t=k);const S=await fetch("http://localhost:1337/api/v1/commits/get/pages");if(!S.ok)throw new Error(`HTTP error! Status: ${S.status}`);l(2,n=await S.json())}catch(_){console.error("Failed to fetch commits:",_)}}const o=h=>{const _=h.detail.search.toLowerCase();l(0,t=t.filter(k=>k.repo.toLowerCase().includes(_)||k.sha.toLowerCase().includes(_)||k.authorName.toLowerCase().includes(_)||k.message.toLowerCase().includes(_)))},u=h=>{h>=0&&h<=n&&(l(1,s=h),c(s))};return ce(()=>{c(s)}),[t,s,n,o,u,()=>u(s-1),()=>u(s+1)]}class Te extends de{constructor(e){super(),he(this,e,Ee,Ce,ie,{})}}export{Te as component};
